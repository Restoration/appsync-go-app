# README
## AppsyncからGoAPIへの通信
AWS AppSyncは、GraphQLサービスであり、リゾルバを通じてデータソースとの間でデータの取得や変更を行います。AppSyncを設定する際に、リゾルバを使って特定のGraphQLクエリやミューテーションがデータソース（例：RDS、DynamoDB、Lambda、HTTPデータソースなど）にどのように対応するかを定義します。

AppSyncがHTTPやRESTful API（この場合、GoAPI）と通信する場合、以下のようなリクエストが考えられます：

1. **POSTリクエスト**: GraphQLの特性上、AppSyncからのリクエストは通常、HTTP POSTリクエストとして送信されます。

2. **エンドポイント**: あなたがAppSyncのリゾルバで指定したエンドポイントにリクエストが送信されます。例えば、GoAPIの`/messages`エンドポイントにデータを取得するクエリをマッピングする場合、そのエンドポイントにリクエストが送信されます。

3. **ヘッダー**: AppSyncからのリクエストには、必要に応じてヘッダーが含まれることがあります。これには認証情報やカスタムヘッダーなどが含まれることがあります。

4. **リクエストボディ**: GraphQLクエリやミューテーションの情報がリクエストボディにJSON形式でエンコードされています。リゾルバで指定したマッピングテンプレートに基づいて、このボディは変換され、APIが期待する形式になります。

具体的な例：

AppSyncのGraphQLミューテーションが以下のような場合：

```graphql
mutation sendMessage($content: String!) {
    sendMessage(content: $content) {
        id
        content
    }
}
```

そして、このミューテーションがGoAPIの`/send`エンドポイントにマッピングされていると仮定すると、AppSyncからGoAPIには以下のようなHTTP POSTリクエストが送信されます：

```json
{
  "content": "Hello from AppSync!"
}
```

しかし、実際のリクエストの形式は、AppSyncで設定したリゾルバのマッピングテンプレートによって異なります。リゾルバのマッピングテンプレートを使用して、AppSyncからの入力をAPIが期待する形式に変換することができます。

## 通信方法
AWS AppSyncを使用してデータをGoAPIに渡す場合、主に2つのアプローチが考えられます。それぞれの方法に関して説明いたします。

1. **HTTPデータソースを使用する**:
   AppSyncは、HTTPリソースとしてのAPIをサポートしています。これにより、Goで作成されたREST API（あるいは他の任意のHTTPエンドポイント）をAppSyncのデータソースとして使用することができます。この方法を使えば、GraphQLクエリを使用して直接GoAPIにデータを渡すことが可能です。
   
   設定方法:
   - AppSyncコンソールにログインします。
   - 左側のメニューから「データソース」を選択し、「新しいデータソースの作成」をクリックします。
   - "データソースのタイプ"として"HTTP"を選択し、適切なエンドポイントURLを提供します。
   - 適切なリゾルバーを作成して、GraphQLクエリやミューテーションをHTTPエンドポイントにマッピングします。

2. **Lambdaデータソースを使用する**:
   もう1つの一般的な方法は、AWS Lambdaを介してGoAPIとの通信を行う方法です。この方法では、AppSyncからLambda関数を呼び出し、Lambda関数内でGoAPIとの通信を行います。この場合、Lambda関数は任意のHTTPリクエストをGoAPIに送信するためのプロキシとして機能します。

   設定方法:
   - GoAPIと通信するLambda関数を作成します。
   - AppSyncコンソールに移動し、「データソース」のセクションで新しいデータソースを作成しますが、今回は"LAMBDA"を選択します。
   - 作成したLambda関数をデータソースとして選択し、適切なリゾルバーを設定してGraphQLクエリやミューテーションとLambda関数をマッピングします。

